!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SVGRealRenderer=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var o=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getRGBColorString=void 0,e.getRGBColorString=function(t){return"rgb("+255*t[0]+", "+255*t[1]+", "+255*t[2]+")"}})),i=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var r=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t),this.node=e}return t.prototype.updatePath=function(t){this.node.setAttribute("d",t)},t.prototype.appendPath=function(t){this.node.setAttribute("d",this.node.getAttribute("d")+"\n"+t)},t.prototype.setStroke=function(t){this.node.setAttribute("stroke",t)},t.prototype.setFill=function(t){this.node.setAttribute("fill",t)},t.prototype.setStrokeWidth=function(t){this.node.setAttribute("stroke-width",t.toString())},t.prototype.delete=function(){this.node.remove()},t}();e.Path=r})),n=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlankGraphPath=void 0,e.getBlankGraphPath=function(t,e,r,n,s){var d,h=t[0],a=t[1],u=Math.floor(a*(e/100)),f=Math.floor(h*(r/100));s?(d="M 0,"+f+" H "+(t[0]-1)+" \n",d+="M "+u+",0 V "+(t[1]-1)):d="";var l=new i.Path(d);return l.setStroke(o.getRGBColorString(n)),l}})),s=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),d=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RealRendererDefaults=void 0,e.RealRendererDefaults={dimensions:[1e3,1e3],xScaleFactor:10,yScaleFactor:1,bgColor:[0,0,0],drawAxes:!0,axesColor:[1,1,1],drawsPerFrame:1,timeStep:1/60,initTime:0,xOffset:50,yOffset:50}})),h=r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.redo=e.undo=void 0,e.undo=function(t){void 0===t&&(t=1);var e=this._doRender;this.stopRender(),this._strokeIndex=Math.min(Math.max(this._strokeIndex-t,0),this.strokes.length-1);for(var r=this._strokeIndex+1;r<this.strokes.length;r++)this.strokes[r].forEach((function(t){return t.delete()}));return e&&this.startRender(),this},e.redo=function(t){void 0===t&&(t=1);var e=this._doRender;this.stopRender();for(var r=Math.min(t,this.strokes.length-this._strokeIndex-1,t),o=0;o<r;o++)this._strokeIndex++,this._display(this.strokes[this._strokeIndex]);return e&&this.startRender(),this}})),a=r((function(e,r){var i=t&&t.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=t&&t.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]}),u=t&&t.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||a(e,t,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.RealRenderer=r.RealRendererTypes=void 0,r.RealRendererTypes=s,u(d,r);var f=function(){function t(t){if(this.strokes=[],this._strokeIndex=-1,this.undo=h.undo,this.redo=h.redo,t=i(i({},d.RealRendererDefaults),t),this.svg=t.svg,this.dimensions=t.dimensions,this.xScaleFactor=t.xScaleFactor,this.yScaleFactor=t.yScaleFactor,this.bgColor=t.bgColor,this.drawAxes=t.drawAxes,this.axesColor=t.axesColor,this.drawsPerFrame=t.drawsPerFrame,this.timeStep=t.timeStep,this.time=t.initTime,this.xOffset=t.xOffset,this.yOffset=t.yOffset,this.xOffset=Math.max(0,Math.min(100,this.xOffset)),this.yOffset=Math.max(0,Math.min(100,this.yOffset)),void 0===this.svg)throw"No SVG Element Found";this.svg.setAttribute("width",this.dimensions[0].toString()),this.svg.setAttribute("height",this.dimensions[1].toString()),this.svg.style.backgroundColor=""+o.getRGBColorString(this.bgColor),this._addStroke([n.getBlankGraphPath(this.dimensions,this.xOffset,this.yOffset,this.axesColor,this.drawAxes)]),this._display(this.strokes[this._strokeIndex]),this._doRender=!1}return t.prototype._drawFunc=function(t){return this},t.prototype._draw=function(){return this.time+=this.timeStep,this._drawFunc(this.time),this},t.prototype._addStroke=function(t){this.strokes.length>this._strokeIndex+1&&this.strokes.splice(this._strokeIndex+1,this.strokes.length-this._strokeIndex),this.strokes[++this._strokeIndex]=t},t.prototype.draw=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)this._draw();return this},t.prototype._render=function(){var t=this;this._doRender&&(this.draw(this.drawsPerFrame),this._display(this.strokes[this._strokeIndex]),window.requestAnimationFrame((function(){t._render()})))},t.prototype._display=function(t){var e=this;t.forEach((function(t){e.svg.appendChild(t.node)}))},t.prototype.startRender=function(){if(!this._doRender)return this._doRender=!0,this._render(),this},t.prototype.stopRender=function(){return this._doRender=!1,this},t.prototype.toggleRender=function(){return this._doRender=!this._doRender,this._doRender&&this._render(),this},t.prototype.resetTime=function(){return this.time=0,this},t.prototype.reset=function(){return this.strokes=[[n.getBlankGraphPath(this.dimensions,this.xOffset,this.yOffset,this.axesColor,this.drawAxes)]],this._strokeIndex=0,this.resetTime(),this._display(this.strokes[this._strokeIndex]),this},t}();r.RealRenderer=f}));return e(r((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RealRenderer=void 0,Object.defineProperty(e,"RealRenderer",{enumerable:!0,get:function(){return a.RealRenderer}})})))}));
