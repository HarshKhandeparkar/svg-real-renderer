!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SVGRealRenderer=e()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t,e,o){return t(o={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&o.path)}},o.exports),o.exports}var r=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getRGBColorString=void 0,e.getRGBColorString=function(t){return"rgb("+255*t[0]+", "+255*t[1]+", "+255*t[2]+")"}})),s=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var o=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t),this.node=e}return t.prototype.export=function(){return{type:"path",data:this.node.outerHTML.toString()}},t.prototype.import=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t,this.node=e.firstChild,e.removeChild(this.node),e.remove()},t.prototype.updatePath=function(t){this.node.setAttribute("d",t)},t.prototype.appendPath=function(t){this.node.setAttribute("d",this.node.getAttribute("d")+" "+t)},t.prototype.setStroke=function(t){this.node.setAttribute("stroke",t)},t.prototype.setFill=function(t){this.node.setAttribute("fill",t)},t.prototype.setStrokeWidth=function(t){this.node.setAttribute("stroke-width",t.toString())},t.prototype.delete=function(){this.node.remove()},t}();e.Path=o})),i=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var o=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","polygon"),o="";t.forEach((function(t){o+=t[0]+","+t[1]+" "})),e.setAttribute("points",o),this.node=e}return t.prototype.export=function(){return{type:"polygon",data:this.node.outerHTML.toString()}},t.prototype.import=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t,this.node=e.firstChild,e.removeChild(this.node),e.remove()},t.prototype.updatePoints=function(t){var e="";t.forEach((function(t){e+=t[0]+","+t[1]+" "})),this.node.setAttribute("points",e)},t.prototype.addPoint=function(t){this.node.setAttribute("points",this.node.getAttribute("points")+(t[0]+",")+t[1]+" ")},t.prototype.setStroke=function(t){this.node.setAttribute("stroke",t)},t.prototype.setFill=function(t){this.node.setAttribute("fill",t)},t.prototype.setStrokeWidth=function(t){this.node.setAttribute("stroke-width",t.toString())},t.prototype.delete=function(){this.node.remove()},t}();e.Polygon=o})),n=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlankGraphPaths=void 0,e.getBlankGraphPaths=function(t,e,o){var n=t[0],a=t[1],h=new s.Path("");switch(o.type){case"none":break;case"axes":var d=Math.floor(a*(o.xOffset/100)),u=Math.floor(n*(o.yOffset/100));h.setStroke(r.getRGBColorString(o.axesColor)),h.appendPath("M 0,"+u+" H "+(t[0]-1)),h.appendPath("M "+d+",0 V "+(t[1]-1));break;case"grid":var l=t[0]*(o.xSpacing/100),c=t[1]*(o.ySpacing/100);console.log(l,c),h.setStroke(r.getRGBColorString(o.lineColor));for(var p=l;p<t[0];p+=l)h.appendPath("M "+p+",0 V "+(t[1]-1));for(var g=c;g<t[1];g+=c)h.appendPath("M 0,"+g+" H "+(t[0]-1));break;case"ruled":var v="horizontal"===o.orientation?t[1]:t[0],f=v*(o.spacing/100);h.setStroke(r.getRGBColorString(o.lineColor));for(var _=f;_<v;_+=f){var S=void 0;S="horizontal"===o.orientation?"M 0,"+_+" H "+(t[0]-1):"M "+_+",0 V "+(t[1]-1),h.appendPath(S)}}var m=new i.Polygon([[0,0],[0,t[1]],[t[0],t[1]],[t[0],0]]);return m.setFill(r.getRGBColorString(e)),m.setStroke(r.getRGBColorString(e)),[m,h]}})),a=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),h=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RealRendererDefaults=void 0,e.RealRendererDefaults={dimensions:[1e3,1e3],bgColor:[0,0,0],bgType:{type:"axes",axesColor:[1,1,1],xOffset:20,yOffset:20},drawsPerFrame:1,timeStep:1/60,initTime:0}})),d=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=void 0,e.clamp=function(t,e,o){return Math.min(Math.max(t,e),o)}})),u=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.redo=e.undo=void 0,e.undo=function(t){void 0===t&&(t=1),this._strokeIndex=d.clamp(this._strokeIndex-t,0,this.strokes.length-1);for(var e=this._strokeIndex+1;e<this.strokes.length;e++)this.strokes[e].forEach((function(t){return t.delete()}));return this},e.redo=function(t){void 0===t&&(t=1);for(var e=d.clamp(t,t,this.strokes.length-this._strokeIndex-1),o=0;o<e;o++)this._strokeIndex++,this._display(this.strokes[this._strokeIndex]);return this}})),l=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var o=function(){function t(t,e){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",t[0].toString()),o.setAttribute("cy",t[1].toString()),o.setAttribute("r",e.toString()),this.node=o}return t.prototype.export=function(){return{type:"circle",data:this.node.outerHTML.toString()}},t.prototype.import=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t,this.node=e.firstChild,e.removeChild(this.node),e.remove()},t.prototype.updateRadius=function(t){this.node.setAttribute("r",t.toString())},t.prototype.updateCenter=function(t){this.node.setAttribute("cx",t[0].toString()),this.node.setAttribute("cy",t[1].toString())},t.prototype.setStroke=function(t){this.node.setAttribute("stroke",t)},t.prototype.setFill=function(t){this.node.setAttribute("fill",t)},t.prototype.setStrokeWidth=function(t){this.node.setAttribute("stroke-width",t.toString())},t.prototype.setDashed=function(t){this.node.setAttribute("stroke-dasharray","2,2"),this.setStroke(t)},t.prototype.delete=function(){this.node.remove()},t}();e.Circle=o})),c=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0;var o=function(){function t(t,e){var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.textContent=e,o.setAttribute("x",t[0].toString()),o.setAttribute("y",t[1].toString()),this.node=o}return t.prototype.export=function(){return{type:"text",data:this.node.outerHTML.toString()}},t.prototype.import=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=t,this.node=e.firstChild,e.removeChild(this.node),e.remove()},t.prototype.updateText=function(t){this.node.textContent=t},t.prototype.setStyle=function(t,e){this.node.style[t]=e},t.prototype.delete=function(){this.node.remove()},t}();e.Text=o})),p=o((function(e,o){var r=t&&t.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},p=t&&t.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),g=t&&t.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||p(e,t,o)};Object.defineProperty(o,"__esModule",{value:!0}),o.RealRenderer=o.RealRendererTypes=void 0,o.RealRendererTypes=a,g(h,o);var v=function(){function t(t){switch(this.strokes=[],this._strokeIndex=-1,this.undo=u.undo,this.redo=u.redo,this.settings=r(r({},h.RealRendererDefaults),t),this.settings.bgType.type){case"axes":this.settings.bgType.xOffset=d.clamp(this.settings.bgType.xOffset,0,100),this.settings.bgType.yOffset=d.clamp(this.settings.bgType.yOffset,0,100);break;case"grid":this.settings.bgType.xSpacing=d.clamp(this.settings.bgType.xSpacing,0,100),this.settings.bgType.ySpacing=d.clamp(this.settings.bgType.ySpacing,0,100),0===this.settings.bgType.xSpacing&&(this.settings.bgType.xSpacing=1),0===this.settings.bgType.ySpacing&&(this.settings.bgType.ySpacing=1);break;case"ruled":this.settings.bgType.spacing=d.clamp(this.settings.bgType.spacing,0,100),0===this.settings.bgType.spacing&&(this.settings.bgType.spacing=1)}if(this.svg=this.settings.svg,this.dimensions=this.settings.dimensions,this.bgColor=this.settings.bgColor,this.bgType=this.settings.bgType,this.drawsPerFrame=this.settings.drawsPerFrame,this.timeStep=this.settings.timeStep,this.time=this.settings.initTime,void 0===this.svg)throw"No SVG Element Found";this.svg.setAttribute("viewBox","0 0 "+this.dimensions[0]+" "+this.dimensions[1]),this.svg.setAttribute("preserveAspectRatio","none"),this.svgSections={bg:document.createElementNS("http://www.w3.org/2000/svg","g"),strokes:document.createElementNS("http://www.w3.org/2000/svg","g"),overlay:document.createElementNS("http://www.w3.org/2000/svg","g")},this.svg.appendChild(this.svgSections.bg),this.svg.appendChild(this.svgSections.strokes),this.svg.appendChild(this.svgSections.overlay),this._addStroke(n.getBlankGraphPaths(this.dimensions,this.bgColor,this.bgType)),this._display(this.strokes[this._strokeIndex]),this._doRender=!1}return t.prototype._drawFunc=function(t){return this},t.prototype._draw=function(){return this.time+=this.timeStep,this._drawFunc(this.time),this},t.prototype._addStroke=function(t){this.strokes.length>this._strokeIndex+1&&this.strokes.splice(this._strokeIndex+1,this.strokes.length-this._strokeIndex),this.strokes[++this._strokeIndex]=t},t.prototype.draw=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)this._draw();return this},t.prototype._render=function(){var t=this;this._doRender&&(this.draw(this.drawsPerFrame),this._display(this.strokes[this._strokeIndex]),window.requestAnimationFrame((function(){t._render()})))},t.prototype._display=function(t,e){var o=this;void 0===e&&(e="strokes"),t.forEach((function(t){null==t.node.parentElement&&o.svgSections[e].appendChild(t.node)}))},t.prototype.startRender=function(){if(!this._doRender)return this._doRender=!0,this._render(),this},t.prototype.stopRender=function(){return this._doRender=!1,this},t.prototype.toggleRender=function(){return this._doRender=!this._doRender,this._doRender&&this._render(),this},t.prototype.exportData=function(){var t=[];return this.strokes.forEach((function(e){t.push(e.map((function(t){return t.export()})))})),{exportData:t,strokeIndex:this._strokeIndex,dimensions:this.dimensions}},t.prototype.importData=function(t){var e=this;this.strokes.forEach((function(t){t.forEach((function(t){return t.delete()}))})),this.svg.setAttribute("viewBox","0 0 "+this.dimensions[0]+" "+this.dimensions[1]),this.strokes=[],t.exportData.forEach((function(t){e.strokes.push(t.map((function(t){switch(t.type){case"circle":var e=new l.Circle([0,0],0);return e.import(t.data),e;case"path":var o=new s.Path("");return o.import(t.data),o;case"text":var r=new c.Text([0,0],"");return r.import(t.data),r;case"polygon":var n=new i.Polygon([]);return n.import(t.data),n}})))})),this._strokeIndex=t.strokeIndex;for(var o=0;o<=this._strokeIndex;o++)this._display(this.strokes[o])},t.prototype.resetTime=function(){return this.time=0,this},t.prototype.reset=function(){return this.strokes=[n.getBlankGraphPaths(this.dimensions,this.bgColor,this.bgType)],this._strokeIndex=0,this.resetTime(),this._display(this.strokes[this._strokeIndex]),this},t}();o.RealRenderer=v})),g=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCircleNode=void 0,e.getCircleNode=function(t,e,o){var s=new l.Circle(t,e);return s.setFill(r.getRGBColorString(o)),s.setStroke(r.getRGBColorString(o)),s}})),v=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLinePathCommand=void 0,e.getLinePathCommand=function(t,e){var o;return o="M "+t[0]+","+t[1],o+=" L "+e[0]+","+e[1]}})),f=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._toolPreview=e._doStroke=e._endStroke=e._startStroke=e.BrushDefaults=e.name=void 0,e.name="brush",e.BrushDefaults={brushColor:[1,1,1],brushSize:1},e._startStroke=function(t,e){this._doPreview=!1;var o=new s.Path("");o.setStroke(r.getRGBColorString(this.toolSettings.brushColor)),o.setStrokeWidth(this.toolSettings.brushSize),this._addStroke([o]),this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.brushSize/2-.5,this.toolSettings.brushColor))},e._endStroke=function(t,e){this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.brushSize/2-.5,this.toolSettings.brushColor)),this._doPreview=!0},e._doStroke=function(t,e){this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.brushSize/2-.5,this.toolSettings.brushColor)),this.strokes[this._strokeIndex][0].appendPath(v.getLinePathCommand(this._lastCoords.get(e),t))},e._toolPreview=function(t,e){var o;0==this._previewStroke.get(e).length?((o=g.getCircleNode(t,this.toolSettings.brushSize/2-.5,this.toolSettings.brushColor)).setFill(r.getRGBColorString(this.toolSettings.brushColor)),o.setStroke(r.getRGBColorString(this.toolSettings.brushColor)),this._previewStroke.get(e).push(o)):((o=this._previewStroke.get(e)[0]).updateCenter(t),o.updateRadius(this.toolSettings.brushSize/2-.5),o.setFill(r.getRGBColorString(this.toolSettings.brushColor)),o.setStroke(r.getRGBColorString(this.toolSettings.brushColor)))}})),_=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._toolPreview=e._doStroke=e._endStroke=e._startStroke=e.EraserDefaults=e.name=void 0,e.name="eraser",e.EraserDefaults={eraserSize:2},e._startStroke=function(t,e){var o=new s.Path("");o.setStroke(r.getRGBColorString(this.bgColor)),o.setStrokeWidth(this.toolSettings.eraserSize),this._addStroke([o]),this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.eraserSize/2-.5,this.bgColor))},e._endStroke=function(t,e){this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.eraserSize/2-.5,this.bgColor)),this._doPreview=!0},e._doStroke=function(t,e){this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.eraserSize/2-.5,this.bgColor)),this.strokes[this._strokeIndex][0].appendPath(v.getLinePathCommand(this._lastCoords.get(e),t))},e._toolPreview=function(t,e){var o;0==this._previewStroke.get(e).length?((o=g.getCircleNode(t,this.toolSettings.eraserSize/2-.5,this.bgColor)).setFill(r.getRGBColorString(this.bgColor)),o.setStroke(r.getRGBColorString(this.bgColor)),o.setDashed(r.getRGBColorString(this.bgColor.map((function(t){return 1-t})))),this._previewStroke.get(e).push(o)):((o=this._previewStroke.get(e)[0]).updateCenter(t),o.updateRadius(this.toolSettings.eraserSize/2-.5))}})),S=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._toolPreview=e._doStroke=e._endStroke=e._startStroke=e.LineDefaults=e.name=void 0,e.name="line",e.LineDefaults={lineThickness:1,lineColor:[1,1,1]};var o=new Map;e._startStroke=function(t,e){this._doPreview=!1;var i=new s.Path("");i.setStroke(r.getRGBColorString(this.toolSettings.lineColor)),i.setStrokeWidth(this.toolSettings.lineThickness),this._addStroke([i]),this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.lineThickness/2-.5,this.toolSettings.lineColor)),this.strokes[this._strokeIndex].push(g.getCircleNode(t,this.toolSettings.lineThickness/2-.5,this.toolSettings.lineColor)),o.set(e,t)},e._endStroke=function(t,e){this.strokes[this._strokeIndex][0].updatePath(v.getLinePathCommand(o.get(e),t)),this.strokes[this._strokeIndex][2].updateCenter(t),o.delete(e),this._doPreview=!0},e._doStroke=function(t,e){this.strokes[this._strokeIndex][0].updatePath(v.getLinePathCommand(o.get(e),t)),this.strokes[this._strokeIndex][2].updateCenter(t)},e._toolPreview=function(t,e){var o;0==this._previewStroke.get(e).length?((o=g.getCircleNode(t,this.toolSettings.lineThickness/2-.5,this.toolSettings.lineColor)).setFill(r.getRGBColorString(this.toolSettings.lineColor)),o.setStroke(r.getRGBColorString(this.toolSettings.lineColor)),this._previewStroke.get(e).push(o)):((o=this._previewStroke.get(e)[0]).updateCenter(t),o.updateRadius(this.toolSettings.lineThickness/2-.5),o.setFill(r.getRGBColorString(this.toolSettings.lineColor)),o.setStroke(r.getRGBColorString(this.toolSettings.lineColor)))}})),m=o((function(e,o){var r=t&&t.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.ToolDefaults=o.tools=void 0,o.tools={brush:f,eraser:_,line:S},o.ToolDefaults=r(r(r({},f.BrushDefaults),S.LineDefaults),_.EraserDefaults)})),y=o((function(e,o){var r=t&&t.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.RealDrawBoardDefaults=void 0,o.RealDrawBoardDefaults=r(r({},h.RealRendererDefaults),{toolSettings:m.ToolDefaults,allowUndo:!1,maxUndos:10,tool:"brush"})})),k=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),w=o((function(e,o){var r=t&&t.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o._resetBoard=o.clear=o.clearPreview=o.changeToolSetting=o.changeTool=void 0,o.changeTool=function(t){return this.tool=t,this._startStroke=m.tools[this.tool]._startStroke,this._doStroke=m.tools[this.tool]._doStroke,this._endStroke=m.tools[this.tool]._endStroke,this._toolPreview=m.tools[this.tool]._toolPreview,this._previewStroke.forEach((function(t){t.forEach((function(t){t.delete()}))})),this._previewStroke.clear(),this},o.changeToolSetting=function(t,e){return this.toolSettings[t]=e,this},o.clearPreview=function(){return this._previewStroke.forEach((function(t){t.forEach((function(t){t.delete()}))})),this._previewStroke.clear(),this},o.clear=function(){return this._strokeIndex=0,this._lastCoords.clear(),this.strokes.forEach((function(t){t.forEach((function(t){return t.delete()}))})),this.strokes=[n.getBlankGraphPaths(this.dimensions,this.bgColor,this.bgType)],this._display(this.strokes[this._strokeIndex]),this},o._resetBoard=function(){this.bgColor=this.settings.bgColor,this.tool=this.settings.tool,this.toolSettings=r(r({},m.ToolDefaults),this.settings.toolSettings),this._lastCoords.clear(),this.stopRender()}})),b=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._removeDOMEvents=e._addDOMEvents=void 0,e._addDOMEvents=function(){this.svg.addEventListener("mousedown",this._mouseDownEventListener),this.svg.addEventListener("mouseup",this._mouseUpEventListener),this.svg.addEventListener("mouseleave",this._mouseLeaveEventListener),this.svg.addEventListener("mousemove",this._previewMouseMoveEventListener),this.svg.addEventListener("touchstart",this._touchStartEventListener),this.svg.addEventListener("touchmove",this._touchMoveEventListener),this.svg.addEventListener("touchend",this._touchEndEventListener),this.svg.addEventListener("touchmove",this._previewTouchMoveEventListener)},e._removeDOMEvents=function(){this.svg.removeEventListener("mousedown",this._mouseDownEventListener),this.svg.removeEventListener("mouseup",this._mouseUpEventListener),this.svg.removeEventListener("mouseexit",this._mouseLeaveEventListener),this.svg.removeEventListener("mousemove",this._previewMouseMoveEventListener),this.svg.removeEventListener("touchstart",this._touchStartEventListener),this.svg.removeEventListener("touchmove",this._touchMoveEventListener),this.svg.removeEventListener("touchend",this._touchEndEventListener),this.svg.removeEventListener("touchmove",this._previewTouchMoveEventListener)}})),C=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e._getTouchCoords=e._getMouseCoords=void 0,e._getMouseCoords=function(t){var e=this.dimensions[0]/this.svg.clientWidth,o=this.dimensions[1]/this.svg.clientHeight;return[t.offsetX*e,t.offsetY*o]},e._getTouchCoords=function(t){var e=this.dimensions[0]/this.svg.clientWidth,o=this.dimensions[1]/this.svg.clientHeight;return[(t.clientX-this.svg.getBoundingClientRect().left)*e,(t.clientY-this.svg.getBoundingClientRect().top)*o]}})),P=o((function(e,o){var r,s=t&&t.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=t&&t.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),h=t&&t.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||n(e,t,o)};Object.defineProperty(o,"__esModule",{value:!0}),o.RealDrawBoard=o.RealDrawBoardTypes=o.RealRendererTypes=void 0,o.RealRendererTypes=a,o.RealDrawBoardTypes=k,h(y,o);var d=function(t){function e(e){var o=t.call(this,e)||this;return o.tool=y.RealDrawBoardDefaults.tool,o._lastCoords=new Map,o._doPreview=!0,o._previewStroke=new Map,o._resetBoard=w._resetBoard,o._addDOMEvents=b._addDOMEvents,o._removeDOMEvents=b._removeDOMEvents,o._startStroke=m.tools[y.RealDrawBoardDefaults.tool]._startStroke,o._endStroke=m.tools[y.RealDrawBoardDefaults.tool]._endStroke,o._doStroke=m.tools[y.RealDrawBoardDefaults.tool]._doStroke,o._toolPreview=m.tools[y.RealDrawBoardDefaults.tool]._toolPreview,o._getMouseCoords=C._getMouseCoords,o._getTouchCoords=C._getTouchCoords,o.changeToolSetting=w.changeToolSetting,o.changeTool=w.changeTool,o.clearPreview=w.clearPreview,o.clear=w.clear,o._mouseDownEventListener=function(t){if(0===t.button){o.svg.addEventListener("mousemove",o._mouseMoveEventListener);var e=o._getMouseCoords(t);o._startStroke(e,"mouse"),o._lastCoords.set("mouse",e)}},o._mouseUpEventListener=function(t){if(0===t.button){var e=o._getMouseCoords(t);o.svg.removeEventListener("mousemove",o._mouseMoveEventListener),o._lastCoords.has("mouse")&&(o._endStroke(e,"mouse"),o._lastCoords.delete("mouse")),o._display(o.strokes[o._strokeIndex])}},o._mouseLeaveEventListener=function(t){o.svg.removeEventListener("mousemove",o._mouseMoveEventListener),o._lastCoords.has("mouse")&&(o._endStroke(o._getMouseCoords(t),"mouse"),o._lastCoords.delete("mouse"),o._display(o.strokes[o._strokeIndex])),o.clearPreview()},o._mouseMoveEventListener=function(t){var e=o._getMouseCoords(t);o._doStroke(e,"mouse"),o._lastCoords.set("mouse",e)},o._previewMouseMoveEventListener=function(t){var e=o._getMouseCoords(t);o._doPreview&&(o._previewStroke.has("mouse")||o._previewStroke.set("mouse",[]),o._toolPreview(e,"mouse"),o._display(o._previewStroke.get("mouse"),"overlay")),o._display(o.strokes[o._strokeIndex])},o._touchStartEventListener=function(t){t.preventDefault();for(var e=0;e<t.touches.length;e++){var r=o._getTouchCoords(t.touches.item(e)),s=t.touches.item(e).identifier.toString();o._startStroke(r,s),o._lastCoords.set(s,r)}},o._touchEndEventListener=function(t){for(var e=0;e<t.changedTouches.length;e++){var r=o._getTouchCoords(t.changedTouches.item(e)),s=t.changedTouches.item(e).identifier.toString();o._endStroke(r,s),o._lastCoords.delete(s)}o.clearPreview()},o._touchMoveEventListener=function(t){for(var e=0;e<t.touches.length;e++){var r=o._getTouchCoords(t.touches.item(e));o._doStroke(r,t.touches.item(e).identifier.toString()),o._lastCoords.set(t.touches.item(e).identifier.toString(),r)}},o._previewTouchMoveEventListener=function(t){for(var e=0;e<t.touches.length;e++){var r=o._getTouchCoords(t.touches.item(e)),s=t.touches.item(e).identifier.toString();o._doPreview&&(o._previewStroke.has(s)||o._previewStroke.set(s,[]),o._toolPreview(r,s),o._display(o._previewStroke.get(s),"overlay")),o._display(o.strokes[o._strokeIndex])}},o.settings=i(i({},y.RealDrawBoardDefaults),e),o.toolSettings=i(i({},m.ToolDefaults),o.settings.toolSettings),o.changeTool(o.settings.tool),o}return s(e,t),e.prototype.startRender=function(){return this._addDOMEvents(),this},e.prototype.stopRender=function(){return this._removeDOMEvents(),this},e.prototype.reset=function(){return this._resetBoard(),t.prototype.reset.call(this),this},e}(p.RealRenderer);o.RealDrawBoard=d})),E=o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.renderPreview=void 0,e.renderPreview=function(t,e){var o=t.exportData,r=t.dimensions;e.setAttribute("viewBox","0 0 "+r[0]+" "+r[1]),o.forEach((function(t){t.forEach((function(t){e.innerHTML+=t.data}))}))}}));return e(o((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.renderPreview=e.RealDrawBoard=e.RealRenderer=void 0,Object.defineProperty(e,"RealRenderer",{enumerable:!0,get:function(){return p.RealRenderer}}),Object.defineProperty(e,"RealDrawBoard",{enumerable:!0,get:function(){return P.RealDrawBoard}}),Object.defineProperty(e,"renderPreview",{enumerable:!0,get:function(){return E.renderPreview}})})))}));
